特别说明

  1. 两阶段工作流的关键设计：
    - 阶段 1 结束时状态为 catalog_ready（而非 completed）
    - 阶段 2 开始前必须验证状态为 catalog_ready
    - 这样前端可以在两个阶段之间展示大纲并让用户选择章节
  2. 文件重复上传：
    - 两个阶段都需要重新上传文件到 AI 服务器
    - 这是因为后端不存储文件（临时文件会被删除）
    - AI 服务的 multimedia 参数只在单次会话中有效
  3. 任务验证严格性：
    - 大纲生成接口验证 workflow_type="extract_catalog"
    - 章节闪卡生成接口验证状态必须是 catalog_ready
    - 两个接口都验证文件名匹配